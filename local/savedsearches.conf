[PCF App Count]
action.email.reportServerEnabled = 0
action.email.useNSSubject = 1
alert.track = 0
dispatch.earliest_time = -7d@h
dispatch.latest_time = now
display.general.timeRangePicker.show = 0
display.general.type = visualizations
display.visualizations.charting.axisTitleX.text = Time
display.visualizations.charting.axisTitleY.text = Apps
display.visualizations.charting.chart = line
display.visualizations.charting.chart.nullValueMode = connect
request.ui_dispatch_app = jmx_cf
request.ui_dispatch_view = search
search = index=jmx  host="*" jvmDescription="*" mbean_domain="org.cloudfoundry" mbean_property_deployment="cf-deployment" mbean_property_job="HM9000" | eval job_and_index = jvmDescription + "_" + mbean_property_job + "_" + mbean_property_index | rename "HM9000.HM9000.NumberOfRunningInstances" as HM9000_HM9000_NumberOfRunningInstances "HM9000.HM9000.NumberOfDesiredApps" as HM9000_HM9000_NumberOfDesiredApps | fields job_and_index HM9000_HM9000_NumberOfRunningInstances HM9000_HM9000_NumberOfDesiredApps | timechart avg(HM9000_HM9000_NumberOfDesiredApps) as "Desired Apps" by job_and_index useother=f limit=200 | addtotals

[PCF Instance Count]
action.email.reportServerEnabled = 0
action.email.useNSSubject = 1
alert.track = 0
dispatch.earliest_time = -7d@h
dispatch.latest_time = now
display.general.timeRangePicker.show = 0
display.general.type = visualizations
display.visualizations.charting.axisTitleX.text = Time
display.visualizations.charting.axisTitleY.text = Instances
display.visualizations.charting.chart = line
display.visualizations.charting.chart.nullValueMode = connect
request.ui_dispatch_app = jmx_cf
request.ui_dispatch_view = search
search = index=jmx  host="*" jvmDescription="*" mbean_domain="org.cloudfoundry" mbean_property_deployment="cf-deployment" mbean_property_job="HM9000" | eval job_and_index = jvmDescription + "_" + mbean_property_job + "_" + mbean_property_index | rename "HM9000.HM9000.NumberOfRunningInstances" as HM9000_HM9000_NumberOfRunningInstances "HM9000.HM9000.NumberOfDesiredApps" as HM9000_HM9000_NumberOfDesiredApps | fields job_and_index HM9000_HM9000_NumberOfRunningInstances HM9000_HM9000_NumberOfDesiredApps | timechart avg(HM9000_HM9000_NumberOfRunningInstances) as "Running Instances" by job_and_index useother=f limit=200 | addtotals

[PCF App and Instance Count]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.maxtime = 60m
action.email.message.view = A PDF was generated for $name$
action.email.paperorientation = landscape
action.email.papersize = letter
action.email.pdfview = apps_instances
action.email.reportServerEnabled = 0
action.email.sendpdf = 1
action.email.sendresults = 1
action.email.subject.view = Splunk Dashboard: '$name$'
action.email.to = userid@domain.com
action.email.ttl = 10
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 9 * * 1
description = scheduled search for view name=apps_instances
dispatch.earliest_time = 1
dispatch.latest_time = 2
enableSched = 1
search = | noop

[PCF Cloud Controller Outstanding Requests]
action.email = 1
action.email.inline = 1
action.email.message.alert = Environment: $result.jvmDescription$
action.email.priority = 2
action.email.reportServerEnabled = 0
action.email.sendresults = 1
action.email.subject = PCF Alert Severity $alert.severity$: $name$
action.email.to = pcf@example.com
alert.severity = 4
alert.suppress = 1
alert.suppress.period = 30m
alert.track = 1
counttype = number of events
cron_schedule = * * * * *
description = Outstanding Requests for Cloud Controller > 3
dispatch.earliest_time = rt-30m
dispatch.latest_time = rt-0m
display.events.fields = ["host","source","sourcetype","mbean_domain","healthy"]
display.general.type = statistics
display.page.search.mode = verbose
display.visualizations.chartHeight = 390
display.visualizations.charting.chart = line
enableSched = 1
quantity = 0
relation = greater than
request.ui_dispatch_app = jmx_cf
request.ui_dispatch_view = search
search = index=jmx jvmDescription="*" mbean_domain="org.cloudfoundry" mbean_property_job="CloudController" | eval job_and_index = mbean_property_job + ":" + mbean_property_index | fields job_and_index cc.requests.outstanding jvmDescription | rename cc.requests.outstanding as cc_requests_outstanding | where cc_requests_outstanding  > 3 | stats count by job_and_index cc_requests_outstanding jvmDescription

[PCF Ephemeral Disk > 80%]
action.email = 1
action.email.inline = 1
action.email.message.alert = Environment: $result.jvmDescription$
action.email.reportServerEnabled = 0
action.email.sendresults = 1
action.email.subject = PCF Alert Severity $alert.severity$: $name$
action.email.to = pcf@example.com
alert.suppress = 1
alert.suppress.period = 30m
alert.track = 1
counttype = number of events
cron_schedule = * * * * *
description = blah
dispatch.earliest_time = rt-30m
dispatch.latest_time = rt-0m
display.events.fields = ["host","source","sourcetype","mbean_domain","healthy"]
display.general.type = statistics
display.page.search.mode = verbose
display.visualizations.chartHeight = 390
display.visualizations.charting.chart = line
enableSched = 1
quantity = 0
relation = greater than
request.ui_dispatch_app = jmx_cf
request.ui_dispatch_view = search
search = index=jmx jvmDescription="*" mbean_domain="org.cloudfoundry" | eval job_and_index = mbean_property_job + ":" + mbean_property_index | rename "system.disk.ephemeral.percent" as system_disk_ephemeral_percent | fields job_and_index system_disk_ephemeral_percent jvmDescription | where system_disk_ephemeral_percent > 80 | stats count by job_and_index system_disk_ephemeral_percent jvmDescription

[PCF Fatal Logs]
action.email.to = pcf@example.com
alert.suppress.period = 30m
cron_schedule = * * * * *
dispatch.earliest_time = rt-30m
dispatch.latest_time = rt-0m
display.general.type = statistics
display.page.search.tab = statistics
search = index=jmx jvmDescription="*" mbean_domain="org.cloudfoundry" | eval job_and_index = mbean_property_job + ":" + mbean_property_index | fields "log_count[level_fatal]" jvmDescription job_and_index | stats range("log_count[level_fatal]") as difference by job_and_index | where difference > 0

[PCF Memory Used > 80%]
action.email = 1
action.email.inline = 1
action.email.message.alert = Environment: $result.jvmDescription$
action.email.reportServerEnabled = 0
action.email.sendresults = 1
action.email.subject = PCF Alert Severity $alert.severity$: $name$
action.email.to = pcf@example.com
alert.suppress = 1
alert.suppress.period = 30m
alert.track = 1
counttype = number of events
cron_schedule = * * * * *
description = PCF Component Memory >80%
dispatch.earliest_time = rt-30m
dispatch.latest_time = rt-0m
display.events.fields = ["host","source","sourcetype","mbean_domain","healthy"]
display.general.type = statistics
display.page.search.mode = verbose
display.visualizations.chartHeight = 390
display.visualizations.charting.chart = line
enableSched = 1
quantity = 0
relation = greater than
request.ui_dispatch_app = jmx_cf
request.ui_dispatch_view = search
search = index=jmx jvmDescription="*" mbean_domain="org.cloudfoundry" | eval job_and_index = mbean_property_job + ":" + mbean_property_index| rename "system.mem.percent" as system_mem_percent | fields job_and_index system_mem_percent jvmDescription | where system_mem_percent > 80 | stats count by job_and_index system_mem_percent jvmDescription

[PCF System Component Health]
action.email.priority = 2
action.email.to = pcf@example.com
alert.suppress.period = 30m
cron_schedule = * * * * *
dispatch.earliest_time = rt-30m
dispatch.latest_time = rt-0m
display.general.type = statistics
display.page.search.tab = statistics
search = index=jmx  host="*" jvmDescription="*" mbean_domain="org.cloudfoundry" | eval job_and_index = mbean_property_job + ":" + mbean_property_index | fields job_and_index jvmDescription healthy | where healthy<1 | stats count by job_and_index healthy jvmDescription

[PCF System CPU Usage > 80%]
action.email = 1
action.email.inline = 1
action.email.message.alert = Environment: $result.jvmDescription$
action.email.priority = 2
action.email.reportServerEnabled = 0
action.email.sendresults = 1
action.email.subject = PCF Alert Severity $alert.severity$: $name$
action.email.to = pcf@example.com
alert.severity = 4
alert.suppress = 1
alert.suppress.period = 30m
alert.track = 1
counttype = number of events
cron_schedule = * * * * *
description = PCF system CPU Usage >80%
dispatch.earliest_time = rt-30m
dispatch.latest_time = rt-0m
display.events.fields = ["host","source","sourcetype","mbean_domain","healthy"]
display.general.type = statistics
display.page.search.mode = verbose
display.visualizations.chartHeight = 390
display.visualizations.charting.chart = line
enableSched = 1
quantity = 0
relation = greater than
request.ui_dispatch_app = jmx_cf
request.ui_dispatch_view = search
search = index=jmx jvmDescription="*" mbean_domain="org.cloudfoundry" | eval job_and_index = mbean_property_job + ":" + mbean_property_index | rename "system.cpu.sys" as system_cpu_sys | fields job_and_index system_cpu_sys jvmDescription | where system_cpu_sys > 80 | stats count by job_and_index system_cpu_sys jvmDescription

