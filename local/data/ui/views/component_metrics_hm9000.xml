<?xml version="1.0"?><form>
  <label>HM9000</label>
  <fieldset autoRun="true" submitButton="false">
    <input type="dropdown" token="prod" searchWhenChanged="true">
      <label>Choose PCF Deployment</label>
      <choice value="jmx_prod_*">All</choice>
      <choice value="jmx_prod_east">Azure Prod East</choice>
      <choice value="jmx_prod_west">Azure Prod West</choice>
      <default>jmx_prod_*</default>
      <initialValue>jmx_prod_*</initialValue>
    </input>
    <input type="time" token="time" searchWhenChanged="true">
      <label>Time Range</label>
      <default>
        <earliest>-15m</earliest>
        <latest>now</latest>
      </default>
    </input>
  </fieldset>
  <searchTemplate>index=$prod$ host="*" mbean_domain="org.cloudfoundry" mbean_property_deployment="cf-deployment" mbean_property_job="HM9000" | eval job_and_index = jvmDescription + "_" + mbean_property_job + "_" + mbean_property_index | fields job_and_index HM9000.HM9000.NumberOfRunningInstances HM9000.HM9000.NumberOfCrashedInstances HM9000.HM9000.NumberOfDesiredInstances HM9000.HM9000.NumberOfCrashedIndices HM9000.HM9000.NumberOfMissingIndices HM9000.HM9000.NumberOfAppsWithAllInstancesReporting HM9000.HM9000.NumberOfAppsWithMissingInstances HM9000.HM9000.NumberOfDesiredApps HM9000.HM9000.NumberOfDesiredAppsPendingStaging HM9000.HM9000.NumberOfUndesiredRunningApps HM9000.memoryStats.lastGCPauseTimeNS HM9000.numGoRoutines HM9000.HM9000.ReceivedHeartbeats HM9000.HM9000.SavedHeartbeats HM9000.HM9000.StartCrashed HM9000.HM9000.StartEvacuating HM9000.HM9000.StartMissing HM9000.HM9000.StopDuplicate HM9000.HM9000.StopEvacauationComplete HM9000.HM9000.StopExtra HM9000.HM9000.DesiredStateSyncTimeInMilliseconds HM9000.HM9000.ActualStateListenerStoreUsagePercentage</searchTemplate>
  <earliestTime>$time.earliest$</earliestTime>
  <latestTime>$time.latest$</latestTime><row>
    <chart>
      <title>Instance Metrics</title>
      <searchPostProcess>timechart avg(HM9000.HM9000.NumberOfRunningInstances) as "Running Instances" avg(HM9000.HM9000.NumberOfCrashedInstances) as "Crashed Instances" avg(HM9000.HM9000.NumberOfDesiredInstances) as "Desired Instances" by job_and_index useother=f limit=200</searchPostProcess>
      <option name="charting.chart">line</option>
      <option name="charting.chart.nullValueMode">connect</option>
      <option name="charting.axisTitleX.text">Time</option>
      <option name="charting.axisTitleY.text">Instances</option>
      <option name="charting.axisTitleX.visibility">visible</option>
      <option name="charting.axisTitleY.visibility">visible</option>
      <option name="charting.axisX.scale">linear</option>
      <option name="charting.axisY.scale">linear</option>
      <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.chart.style">shiny</option>
      <option name="charting.drilldown">all</option>
      <option name="charting.layout.splitSeries">0</option>
      <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
      <option name="charting.legend.placement">right</option>
    </chart>
  </row>
  <row>
    <chart>
      <title>Indices Metrics</title>
      <searchPostProcess>timechart avg(HM9000.HM9000.NumberOfCrashedIndices) as "Crashed Indices" avg(HM9000.HM9000.NumberOfMissingIndices) as "Missing Indices" by job_and_index useother=f limit=200</searchPostProcess>
      <option name="charting.axisTitleX.visibility">visible</option>
      <option name="charting.axisTitleY.visibility">visible</option>
      <option name="charting.axisX.scale">linear</option>
      <option name="charting.axisY.scale">linear</option>
      <option name="charting.chart">line</option>
      <option name="charting.chart.nullValueMode">connect</option>
      <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.chart.style">shiny</option>
      <option name="charting.drilldown">all</option>
      <option name="charting.layout.splitSeries">0</option>
      <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
      <option name="charting.legend.placement">right</option>
      <option name="count">10</option>
      <option name="list.drilldown">full</option>
      <option name="list.wrap">1</option>
      <option name="maxLines">5</option>
      <option name="raw.drilldown">full</option>
      <option name="rowNumbers">0</option>
      <option name="table.drilldown">1</option>
      <option name="table.wrap">1</option>
      <option name="type">list</option>
      <option name="charting.axisTitleY.text">Indicies</option>
      <option name="charting.axisTitleX.text">Time</option>
    </chart>
  </row>
  <row>
    <chart>
      <title>App Metrics</title>
      <searchPostProcess>timechart avg(HM9000.HM9000.NumberOfAppsWithAllInstancesReporting) as "All Instances Reporting" avg(HM9000.HM9000.NumberOfAppsWithMissingInstances) as "Missing Instances" avg(HM9000.HM9000.NumberOfDesiredApps) as "Desired Apps" avg(HM9000.HM9000.NumberOfDesiredAppsPendingStaging) as "Pending Staging" avg(HM9000.HM9000.NumberOfUndesiredRunningApps) as "Undesired Apps" by job_and_index useother=f limit=200</searchPostProcess>
      <earliestTime>$earliest$</earliestTime>
      <latestTime>$latest$</latestTime>
      <option name="charting.axisTitleX.visibility">visible</option>
      <option name="charting.axisTitleY.visibility">visible</option>
      <option name="charting.axisX.scale">linear</option>
      <option name="charting.axisY.scale">linear</option>
      <option name="charting.chart">line</option>
      <option name="charting.chart.nullValueMode">connect</option>
      <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.chart.style">shiny</option>
      <option name="charting.drilldown">all</option>
      <option name="charting.layout.splitSeries">0</option>
      <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
      <option name="charting.legend.placement">right</option>
      <option name="count">10</option>
      <option name="list.drilldown">full</option>
      <option name="list.wrap">1</option>
      <option name="maxLines">5</option>
      <option name="raw.drilldown">full</option>
      <option name="rowNumbers">0</option>
      <option name="table.drilldown">1</option>
      <option name="table.wrap">1</option>
      <option name="type">list</option>
      <option name="charting.axisTitleY.text">Apps</option>
      <option name="charting.axisTitleX.text">Time</option>
    </chart>
  </row>
  <row>
    <chart>
      <title>Command Metrics</title>
      <searchPostProcess>timechart avg(HM9000.HM9000.ReceivedHeartbeats) as "Received Heartbeats" avg(HM9000.HM9000.SavedHeartbeats) as "Saved Heartbeats" avg(HM9000.HM9000.StartCrashed) as "Start Crashed" avg(HM9000.HM9000.StartEvacuating) as "Start Evacuating" avg(HM9000.HM9000.StartMissing) as "Start Missing" avg(HM9000.HM9000.StopDuplicate) as "Stop Duplicate" avg(HM9000.HM9000.StopEvacauationComplete) as "Stop Evac Complete" avg(HM9000.HM9000.StopExtra) as "Stop Extra" by job_and_index useother=f limit=200</searchPostProcess>
      <option name="charting.axisTitleX.visibility">visible</option>
      <option name="charting.axisTitleY.visibility">visible</option>
      <option name="charting.axisX.scale">linear</option>
      <option name="charting.axisY.scale">linear</option>
      <option name="charting.chart">line</option>
      <option name="charting.chart.nullValueMode">connect</option>
      <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.chart.style">shiny</option>
      <option name="charting.drilldown">all</option>
      <option name="charting.layout.splitSeries">0</option>
      <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
      <option name="charting.legend.placement">right</option>
      <option name="count">10</option>
      <option name="list.drilldown">full</option>
      <option name="list.wrap">1</option>
      <option name="maxLines">5</option>
      <option name="raw.drilldown">full</option>
      <option name="rowNumbers">0</option>
      <option name="table.drilldown">1</option>
      <option name="table.wrap">1</option>
      <option name="type">list</option>
      <option name="charting.axisTitleY.text">Count</option>
      <option name="charting.axisTitleX.text">Time</option>
    </chart>
  </row>
  <row>
    <chart>
      <title>Resource Metrics</title>
      <searchPostProcess>eval GCPause=(HM9000.memoryStats.lastGCPauseTimeNS/100000) | timechart avg(GCPause) as "GC ms" avg(HM9000.numGoRoutines) as "Go Routines" by job_and_index useother=f limit=200</searchPostProcess>
      <option name="charting.axisTitleX.visibility">visible</option>
      <option name="charting.axisTitleY.visibility">visible</option>
      <option name="charting.axisX.scale">linear</option>
      <option name="charting.axisY.scale">linear</option>
      <option name="charting.chart">line</option>
      <option name="charting.chart.nullValueMode">connect</option>
      <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.chart.style">shiny</option>
      <option name="charting.drilldown">all</option>
      <option name="charting.layout.splitSeries">0</option>
      <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
      <option name="charting.legend.placement">right</option>
      <option name="count">10</option>
      <option name="list.drilldown">full</option>
      <option name="list.wrap">1</option>
      <option name="maxLines">5</option>
      <option name="raw.drilldown">full</option>
      <option name="rowNumbers">0</option>
      <option name="table.drilldown">1</option>
      <option name="table.wrap">1</option>
      <option name="type">list</option>
      <option name="charting.axisTitleY.text">Count</option>
      <option name="charting.axisTitleX.text">Time</option>
    </chart>
  </row>
  <row>
    <chart>
      <title>State Store Usage</title>
      <searchPostProcess>timechart avg(HM9000.HM9000.ActualStateListenerStoreUsagePercentage) as "State Store Percent Used" by job_and_index useother=f limit=200</searchPostProcess>
      <option name="charting.axisTitleX.visibility">visible</option>
      <option name="charting.axisTitleY.visibility">visible</option>
      <option name="charting.axisX.scale">linear</option>
      <option name="charting.axisY.scale">linear</option>
      <option name="charting.chart">line</option>
      <option name="charting.chart.nullValueMode">connect</option>
      <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.chart.style">shiny</option>
      <option name="charting.drilldown">all</option>
      <option name="charting.layout.splitSeries">0</option>
      <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
      <option name="charting.legend.placement">right</option>
      <option name="count">10</option>
      <option name="list.drilldown">full</option>
      <option name="list.wrap">1</option>
      <option name="maxLines">5</option>
      <option name="raw.drilldown">full</option>
      <option name="rowNumbers">0</option>
      <option name="table.drilldown">1</option>
      <option name="table.wrap">1</option>
      <option name="type">list</option>
      <option name="charting.axisTitleY.text">Percent</option>
      <option name="charting.axisTitleX.text">Time</option>
    </chart>
  </row>
  <row>
    <chart>
      <title>Desired State Sync Time</title>
      <searchPostProcess>timechart avg(HM9000.HM9000.DesiredStateSyncTimeInMilliseconds) as "Sync Time" by job_and_index useother=f limit=200</searchPostProcess>
      <option name="charting.axisTitleX.visibility">visible</option>
      <option name="charting.axisTitleY.visibility">visible</option>
      <option name="charting.axisX.scale">linear</option>
      <option name="charting.axisY.scale">linear</option>
      <option name="charting.chart">line</option>
      <option name="charting.chart.nullValueMode">connect</option>
      <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.chart.style">shiny</option>
      <option name="charting.drilldown">all</option>
      <option name="charting.layout.splitSeries">0</option>
      <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
      <option name="charting.legend.placement">right</option>
      <option name="count">10</option>
      <option name="list.drilldown">full</option>
      <option name="list.wrap">1</option>
      <option name="maxLines">5</option>
      <option name="raw.drilldown">full</option>
      <option name="rowNumbers">0</option>
      <option name="table.drilldown">1</option>
      <option name="table.wrap">1</option>
      <option name="type">list</option>
      <option name="charting.axisTitleY.text">Ms</option>
      <option name="charting.axisTitleX.text">Time</option>
    </chart>
  </row>
</form>